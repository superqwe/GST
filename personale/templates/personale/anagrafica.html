{% extends "personale/base.html" %}

{% load static %}

{% block title %}
Anagrafica
{% endblock %}


{% block menu %}
{% include "personale/menu.html" %}
{% endblock %}



{% block corpo %}
    <h1>Elenco personale (Anagrafica) ({{ lavoratori.count }})</h1>

    <div class="table-responsive">
            <table class="table table-striped table-sm text-center ">
                <thead class="thead-light">
                <tr>
                    <th scope="col">Stato</th>
                    <th>Cognome</th>
                    <th>Nome</th>
                    <th>In Forza</th>
                    <th>Azienda</th>
                    <th>Mansione</th>
                    <th>Cantiere</th>
                    <th>UNILAV</th>
                    <th>Idoneit√†</th>

                </tr>
                </thead>

                {% for lavoratore in lavoratori %}
                    <tr>
                        <td><i class="fas fa-circle {{lavoratore.stato_formazione}}"></i></td>
                        <th scope="row" class="text-left">{{lavoratore.lavoratore.cognome}}</th>
                        <th scope="row" class="text-left">{{lavoratore.lavoratore.nome}}</th>
                        <td> {% if lavoratore.in_forza %} x {% else%}  {% endif %} </td>
                        <td> {{lavoratore.get_azienda_display|default_if_none:""}}</td>
                        <td> {{lavoratore.mansione|default_if_none:""}}</td>
                        <td> {{lavoratore.get_cantiere_display|default_if_none:""}}</td>
                        <td {% if lavoratore.unilav < oggi %} class="alert alert-danger" role="alert"
                            {% elif lavoratore.unilav < mesi1 %} class="alert alert-warning" role="alert"
                            {% elif lavoratore.unilav < mesi2 %} class="alert alert-info" role="alert"
                            {% endif %}> {{lavoratore.unilav|default_if_none:""}}</td>
                        <td {% if lavoratore.idoneita < oggi %} class="alert alert-danger" role="alert"
                            {% elif lavoratore.idoneita < mesi1 %} class="alert alert-warning" role="alert"
                            {% elif lavoratore.idoneita < mesi2 %} class="alert alert-info" role="alert"
                            {% endif %}> {{lavoratore.idoneita|default_if_none:""}}</td>
                    </tr>
                {% endfor %}

            </table>
        </div>
{% endblock %}